C51 COMPILER V9.60.0.0   MCU_OLED_SHOW                                                     06/14/2020 15:26:56 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE MCU_OLED_SHOW
OBJECT MODULE PLACED IN .\Objects\MCU_OLED_Show.obj
COMPILER INVOKED BY: D:\Keil5\C51\BIN\C51.EXE MCU_OLED_Show.c LARGE OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\
                    -Listings\MCU_OLED_Show.lst) TABS(2) OBJECT(.\Objects\MCU_OLED_Show.obj)

line level    source

   1          #include "MCU_OLED_Show.h"
   2          
   3          //========================================================================
   4          // 函数: void MCU_OLED_StatusChange(unsigned char flag)
   5          // 描述: 手机连接后，MCU控制模块状态显示
   6          // 参数: flag:操作标记位，根据操作符号，更改OLED状态显示
   7          // 返回: 无
   8          // 说明:
   9          // 版本: V1.0, 2020.03.09
  10          //========================================================================
  11          void MCU_OLED_StatusChange(unsigned char flag)
  12          {
  13   1        if(Phone_flag){
  14   2          if(flag==0x00){OLED_CLS_Local(0,4,X_WIDTH,Y_WIDTH); OLED_P6x8Str(6,4,"L1:0 L2:0 L3:0 L4:0");}
  15   2          if(flag==0x01||flag==0x00){if(P14==0x01){OLED_P6x8Str(24,4,"1");}else{OLED_P6x8Str(24,4,"0");} }
  16   2          if(flag==0x02||flag==0x00){if(P15==0x01){OLED_P6x8Str(54,4,"1");}else{OLED_P6x8Str(54,4,"0");}}
  17   2          if(flag==0x04||flag==0x00){if(P16==0x01){OLED_P6x8Str(84,4,"1");}else{OLED_P6x8Str(84,4,"0");} }
  18   2          if(flag==0x08||flag==0x00){if(P17==0x01){OLED_P6x8Str(114,4,"1");}else{OLED_P6x8Str(114,4,"0");} }
  19   2        }
  20   1      }
  21          
  22          
  23          //========================================================================
  24          // 函数: void MCU_OLED_MessageShow(unsigned char Order,unsigned char Wifi_status_1,unsigned char Wifi_stat
             -us_2)
  25          // 描述: 系统OLED显示函数,主要显示WiFi连接状态
  26          // 参数: Order:WiFi推送状态命令;Wifi_status_1,Wifi_status_2:WiFi状态标记位
  27          // 返回: 无
  28          // 说明:
  29          // 版本: V1.0, 2020.03.09
  30          //========================================================================
  31          void MCU_OLED_MessageShow(unsigned char Order,unsigned char Wifi_status_1,unsigned char Wifi_status_2)
  32          {
  33   1        //推送wifi状态
  34   1        if(Order==0x0d)
  35   1        {
  36   2          //清除第三行及以下所有行
  37   2          OLED_CLS_Local(0,2,X_WIDTH,Y_WIDTH); 
  38   2          //将手机连接标志位，网络连接标志位初始化
  39   2          Phone_flag=0;Net_flag=0;
  40   2          switch(Wifi_status_2)
  41   2          {
  42   3            //SoftAP模式开启
  43   3            case 0x01:OLED_P6x8Str(6,2,"M:A");
  44   3              break;
  45   3            //Station模式开启
  46   3            case 0x02:OLED_P6x8Str(6,2,"M:S");
  47   3              break;
  48   3            //SoftAP模式开启，开启配置模式,配置使用SoftAP
  49   3            case 0x05:OLED_P6x8Str(6,2,"M:A C:S");
  50   3              break;
  51   3            //Station模式开启，开启配置模式,配置使用AirLink
  52   3            case 0x06:OLED_P6x8Str(6,2,"M:S C:A");
  53   3              break;
C51 COMPILER V9.60.0.0   MCU_OLED_SHOW                                                     06/14/2020 15:26:56 PAGE 2   

  54   3            //Station模式开启，成功连接路由器
  55   3            case 0x12:OLED_P6x8Str(6,2,"M:S C:A W:1");
  56   3              break;
  57   3            //Station模式开启，成功连接路由器，开启绑定模式
  58   3            case 0x1A:OLED_P6x8Str(6,2,"M:S C:A W:1");
  59   3              break;
  60   3            //Station模式开启，成功连接路由器，开启绑定模式，连接上云端
  61   3            case 0x3A:
  62   3                //Station模式开启，成功连接路由器，开启绑定模式，连接上云端，无手机连接
  63   3                if(Wifi_status_1>=0x00 && Wifi_status_1<=0x07 )
  64   3                { OLED_P6x8Str(6,2,"M:S C:A W:1 N:1");Net_flag=1; }
  65   3                //Station模式开启，成功连接路由器，开启绑定模式，连接上云端，有手机连接
  66   3                if(Wifi_status_1>=0x08 && Wifi_status_1<=0x0F )
  67   3                { OLED_P6x8Str(6,2,"M:S C:A W:1 N:1 P:1");Net_flag=1;Phone_flag=1;}
  68   3              break;  
  69   3          }
  70   2        }
  71   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    425    ----
   CONSTANT SIZE    =     96    ----
   XDATA SIZE       =   ----       3
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
